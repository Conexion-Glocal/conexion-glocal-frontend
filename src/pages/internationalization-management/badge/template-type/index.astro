---
import CreateForm from "@components/internationalization_management/badge/template_type/CreateForm.astro";
import InfoDrawer from "@components/internationalization_management/badge/template_type/InfoDrawer.astro";
import List from "@components/internationalization_management/badge/template_type/List.astro";
import UpdateForm from "@components/internationalization_management/badge/template_type/UpdateForm.astro";

import DeleteWindow from "@components/layout/baseLayout/DeleteWindow.astro";

import BaseLayout from "@layouts/BaseLayout.astro";
import CreateWindowLayout from "@layouts/shared/CreateWindowLayout.astro";
import DrawerLayout from "@layouts/shared/DrawerLayout.astro";
import UpdateWindowLayout from "@layouts/shared/UpdateWindowLayout.astro";

import { validatePermission } from "@utils/permissions";

const endpoint = `${import.meta.env.API_URL}/internationalization-management/badge/template-type`;

const permissions = {
    create: validatePermission(""),
    delete: validatePermission(""),
    read: validatePermission(""),
    update: validatePermission(""),
};
---

<BaseLayout permissions={permissions} title="Tipos de plantilla">
    <div
        x-data="{isDeleteWindowOpen: false, isInfoDrawerOpen: false, isUpdateWindowOpen: false}"
    >
        {
            permissions.read ? (
                <div x-data={`{id: '', name: ''}`}>
                    <List endpoint={endpoint} permissions={permissions} />
                    <DrawerLayout endpoint={endpoint}>
                        <InfoDrawer />
                    </DrawerLayout>
                    {permissions.create ? (
                        <CreateWindowLayout endpoint={endpoint}>
                            <CreateForm />
                        </CreateWindowLayout>
                    ) : (
                        ""
                    )}
                    {permissions.delete ? (
                        <DeleteWindow endpoint={endpoint} />
                    ) : (
                        ""
                    )}
                    {permissions.update ? (
                        <UpdateWindowLayout endpoint={endpoint}>
                            <UpdateForm />
                        </UpdateWindowLayout>
                    ) : (
                        ""
                    )}
                </div>
            ) : (
                ""
            )
        }
    </div>
</BaseLayout>
